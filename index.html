<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Таблица Шульте</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
    	function shuffle(arr) {
		    return arr.sort(function() {return 0.5 - Math.random()});
		}
   		function CreateTable(argс) {
   			var element=document.getElementById('game');
   			var newdiv = document.getElementById("find");
   			var timeu = document.getElementById("timer");
			if(!element){
			var arr = [];
			arg = Math.pow(argс,2);
			for (var i = 1; i <= arg; i++) {
				arr.push(i);
			}
			var alltr = Math.sqrt(Number(arr[arr.length-1]));
			shuffle(arr);
			var num = 0;
			var table = document.createElement("TABLE");
			table.setAttribute("id","game");
			document.querySelectorAll("center")[0].appendChild(table);
			for (var i=0; i<alltr;i++){
				var tr = document.createElement("TR");
				for (var j=0; j<alltr;j++){
					var td = document.createElement("TD");
					td.appendChild(document.createTextNode(arr[num]));
					td.setAttribute("id", arr[num]);
					td.setAttribute("class", "number");
					tr.appendChild(td);
					table.appendChild(tr);
					num++;
				}
			}
			StartGame(arg);
			}else {
				element.parentNode.removeChild(element);
				if (newdiv) newdiv.parentNode.removeChild(newdiv);
				if (timeu) timeu.parentNode.removeChild(timeu);
					var arr = [];
				arg = Math.pow(argс,2);
				for (var i = 1; i <= arg; i++) {
					arr.push(i);
				}
				var alltr = Math.sqrt(Number(arr[arr.length-1]));
				shuffle(arr);
				var num = 0;
				var table = document.createElement("TABLE");
				table.setAttribute("id","game");
				document.querySelectorAll("center")[0].appendChild(table);
				for (var i=0; i<alltr;i++){
					var tr = document.createElement("TR");
					for (var j=0; j<alltr;j++){
						var td = document.createElement("TD");
						td.appendChild(document.createTextNode(arr[num]));
						td.setAttribute("id", arr[num]);
						td.setAttribute("class", "number");
						tr.appendChild(td);
						table.appendChild(tr);
						num++;
					}
				}
				StartGame(arg);
			}
        }
        async function StartGame(arg){
        	var time1 = Date.now();
        	newdiv = document.createElement("DIV");
        	newdiv.setAttribute("id","find");
        	newdiv.setAttribute("class","number");
        	newdiv.appendChild(document.createTextNode("1"));
        	document.querySelectorAll("#getGames")[0].appendChild(newdiv);
			check = 1;
			table = document.getElementById("game");
			table.onclick = function(event) {
	            t=event.target||event.srcElement; 
	         	if (Number(t.getAttribute("id")) == check){
	         		check++;
	         		if (check!=arg+1){
	         			t.setAttribute("style","color:black;");
	         			var newdiv = document.getElementById("find");
	         			newdiv.innerHTML = String(check);
	         			t.setAttribute("style","color:white;");
	         		}else{
	         			var newdiv = document.getElementById("find");
	         			newdiv.innerHTML = "X";
	         			var time2 = Date.now();
	         			var timeg = Math.round((time2-time1)/1000);
	         			var time3 = Math.round((time2-time1)/1000);
						var h = time3/3600 ^ 0 ;
						var m = (time3-h*3600)/60 ^ 0 ;
						var s = time3-h*3600-m*60 ;
						time3 = (h<10?"0"+h:h)+" ч. "+(m<10?"0"+m:m)+" мин. "+(s<10?"0"+s:s)+" сек.";
	         			timeu = document.createElement("DIV");
			        	timeu.setAttribute("id","timer")
			        	timeu.appendChild(document.createTextNode("Ваше время: "+time3));
			        	document.querySelectorAll("#getGames")[0].appendChild(timeu);
	         		}
	         	}
    		}
        	}
    function show(a){
    	if (a==0){
    		document.getElementsByClassName("menu")[0].setAttribute("style","display:none;");
    		document.getElementById("getGames").setAttribute("style","padding-top: 5px;");

    	}
    	if (a==1){
    		document.getElementsByClassName("menu")[0].removeAttribute("style","display:none;");
    		document.getElementById("getGames").setAttribute("style","display:none;");
    		document.getElementById("game").remove();
    		document.getElementById("find").remove();
    		document.getElementById("timer").remove();

    	}
    }
    </script>
</head>
<body>
<center>
	<div class="menu">
<div class="menua" onclick="show(0)">Играть</div>
<div class="menua"><a>Последние 10 игр</a></div>
<div class="menua"><a>Рекорды</a></div>
</div>
<br>
<div id="getGames" style="padding-top: 5px;display:none;">
	<a style="cursor:pointer;" onclick="show(1)"><svg height="40px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 -3 6.82666 6.82666" width="30px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css">
   <![CDATA[
    .fil1 {fill:none}
    .fil0 {fill:#00f;fill-rule:nonzero}
   ]]>
  </style></defs><g id="Layer_x0020_1"><g id="_506615432"><path class="fil0" d="M5.76 3.62667c0.117819,0 0.213335,-0.0955157 0.213335,-0.213335 0,-0.117819 -0.0955157,-0.213335 -0.213335,-0.213335l-4.69334 0c-0.117819,0 -0.213335,0.0955157 -0.213335,0.213335 0,0.117819 0.0955157,0.213335 0.213335,0.213335l4.69334 0z" id="_506615984"/><path class="fil0" d="M2.4487 5.09704c0.0833031,0.0833031 0.218366,0.0833031 0.301669,0 0.0833031,-0.0833031 0.0833031,-0.218366 0,-0.301669l-1.38204 -1.38204 1.38204 -1.38204c0.0833031,-0.0833031 0.0833031,-0.218366 0,-0.301669 -0.0833031,-0.0833031 -0.218366,-0.0833031 -0.301669,0l-1.53163 1.53163 -0.00125984 0.00122835c-0.083311,0.083311 -0.083311,0.21839 0,0.301701l1.5748e-005 -1.5748e-005 1.53287 1.53288z" id="_506616128"/></g></g><rect class="fil1" height="6.82666" width="6.82666"/></svg></a>
<a onclick="CreateTable(3)" class="select">3x3</a>
<a onclick="CreateTable(4)" class="select">4x4</a>
<a onclick="CreateTable(5)" class="select">5x5</a>
<a onclick="CreateTable(6)" class="select">6x6</a>
</div>
</center>
</body>
</html>